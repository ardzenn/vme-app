<style>
    .navbar-non-collapsing {
        display: flex;
        align-items: center;
    }
</style>

<nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container-fluid">
        <a class="navbar-brand" href="/dashboard"><img src="/images/logo.png" alt="VME" style="height: 80px; width: 70px;"><span style="padding:0.5em;">Dashboard</span></a>
        
        <span><a class="nav-link" href="/feed"><i class="fas fa-newspaper me-1"></i>Company Feed</a></span>
        <span><a class="nav-link" href="/planning/my-weekly-itineraries"><i class="fas fa-calendar-week me-1"></i>My Weekly Itineraries</a></span>

        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavCollapsible">
            <span class="navbar-toggler-icon"></span>
        </button>


        <div>
            <ul class="navbar-nav flex-row align-items-center">
                <% if (currentUser && currentUser.role === 'Admin') { %>
                    <li class="nav-item">
                        <button class="btn btn-danger btn-sm me-2" data-bs-toggle="modal" data-bs-target="#announcementModal">
                            <i class="fas fa-bullhorn"></i> Announce
                        </button>
                    </li>
                <% } %>
                
                <li class="nav-item dropdown">
                    <a class="nav-link" href="#" id="notificationDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false" style="font-size: 1.2rem; position: relative;">
                        <i class="fas fa-bell"></i>
                        <span class="badge rounded-pill bg-danger" id="notification-badge" style="position: absolute; top: 0px; right: -5px; font-size: 0.6em; padding: 0.3em 0.5em; display: none;"></span>
                    </a>
                    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="notificationDropdown" id="notification-list" style="width: 350px; max-height: 400px; overflow-y: auto;">
                        <li class="p-3 text-center text-muted">Loading notifications...</li>
                    </ul>
                </li>

             

                <li class="nav-item dropdown ms-2">
                    <a class="nav-link dropdown-toggle d-flex align-items-center" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                        <img src="<%= currentUser.profilePicture || '/images/default-profile.png' %>" class="rounded-circle me-2" width="30" height="30" style="object-fit: cover;">
                        <span class="d-none d-lg-inline">Hello, <%= currentUser.firstName %></span>
                    </a>
                    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown">
                        <li><a class="dropdown-item" href="/profile">Profile</a></li>
                        <% if (currentUser && currentUser.role !== 'IT' && currentUser.role !== 'Admin') { %>
                            <li><button class="dropdown-item" id="get-it-support-btn"><i class="fas fa-headset"></i> Get IT Support</button></li>
                        <% } %>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item" href="/logout">Logout</a></li>
                        <li><a href="/forgot-password" class="dropdown-item">Reset Password</a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</nav>